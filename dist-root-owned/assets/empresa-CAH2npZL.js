import{A as i}from"./index-pd_GWLm5.js";async function w(o,t,a,n){try{const r=[];n&&r.push(`novoStatus=${n}`),t&&r.push(`novaSituacao=${t}`),a!==void 0&&r.push(`novaMensagem=${encodeURIComponent(a)}`);const l=r.length?"?"+r.join("&"):"",s=`${i}/api/empresas/athena/alterar-empresa/modelo-athena/${o}${l}`,m=await fetch(s,{method:"PUT"});if(!m.ok)throw new Error("Erro ao alterar situação");return m.json()}catch(r){throw console.error(r),new Error("Erro ao alterar situação")}}async function b(o=50){try{let t=[],a=0;for(;;){const n=`${i}/api/empresas/athena/buscar-todos-registros?pageNumber=${a}&pageSize=${o}`,r=await fetch(n);if(!r.ok)break;const l=await r.json(),s=l.content??[];if(s.length===0&&a===0){for(t=[],a=0;;){const u=`${i}/api/empresas/conexa/buscar-todos-registros?pageNumber=${a}&pageSize=${o}`,c=await fetch(u);if(!c.ok)break;const p=await c.json(),h=p.data??[],d=h.map(e=>{var g;return{id:e.id??e.customerId??null,customerId:e.customerId??e.id??null,nomeEmpresa:e.nomeEmpresa??e.name??e.nome??null,cnpj:e.cnpj??((g=e.legalPerson)==null?void 0:g.cnpj)??null,email:e.email??e.emails??e.emailsMessage??null,telefone:e.telefone??e.phone??null,statusEmpresa:e.statusEmpresa??null,situacao:e.situacao??null,mensagem:e.mensagem??null,__raw:e}});t=t.concat(d);const f=p.totalPages??(h.length<o,a+1);if(a++,a>=f)break}break}t=t.concat(s.map(u=>({...u})));const m=l.totalPages??(s.length<o,a+1);if(a++,a>=m)break}return{content:t,pageNumber:0,pageSize:o,totalElements:t.length,totalPages:1,lastPage:!0}}catch(t){throw console.error("Erro buscarTodasEmpresas:",t),new Error("Erro ao buscar todas as empresas")}}export{w as alterarSituacaoEmpresa,b as buscarTodasEmpresas};
